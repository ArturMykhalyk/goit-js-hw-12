{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49632098-24a72905d1eb262516a3f1210';\n\n// Ця функція повинна приймати один параметр query (пошукове слово, яке є рядком),\n// здійснювати HTTP-запит і повертати значення властивості data з отриманої відповіді.\nasync function getImagesByQuery(query, page, perPage) {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      per_page: perPage,\n      page: page,\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  });\n  return response.data;\n}\n\nexport { getImagesByQuery };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n//  Ця функція повинна приймати масив images, створювати HTML-розмітку для галереї,\n// додавати її в контейнер галереї та викликати метод екземпляра SimpleLightbox refresh(). Нічого не повертає.\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  showCounter: false,\n});\nfunction createGallery(images) {\n  const gallery = document.querySelector('.gallery');\n\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n  <li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n    />\n    <ul class=\"gallery-info-img\">\n    <li><p class =\"gallery-info-name\">Likes <span>${likes}</span></p></li>\n    <li><p class =\"gallery-info-name\">Views <span>${views}</span></p></li>\n    <li><p class =\"gallery-info-name\">Comments <span>${comments}</span></p></li>\n    <li><p class =\"gallery-info-name\">Downloads <span>${downloads}</span></p></li>\n\n    </ul>\n  </a>\n</li>\n`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\n// Ця функція нічого не приймає та повинна очищати вміст контейнера галереї. Нічого не повертає\nfunction clearGallery() {\n  document.querySelector('.gallery').innerHTML = '';\n}\n\n//  Ця функція нічого не приймає, повинна додавати клас для відображення лоадера. Нічого не повертає.\nfunction showLoader() {\n  document.querySelector('.loader').classList.add('visible');\n}\n\n//  Ця функція нічого не приймає, повинна прибирати клас для відображення лоадера. Нічого не повертає\nfunction hideLoader() {\n  document.querySelector('.loader').classList.remove('visible');\n}\nfunction showLoadMoreButton() {\n  document.querySelector('.moreButton').classList.add('visible');\n}\nfunction hideLoadMoreButton() {\n  document.querySelector('.moreButton').classList.remove('visible');\n}\n\nexport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n};\n","import { getImagesByQuery } from './js/pixabay-api';\nimport iziToast from 'izitoast';\n\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst inputSearch = document.querySelector('[name=\"search-text\"]');\nconst btnMore = document.querySelector('.moreButton');\nlet searchWord = '';\nlet page = 1;\nlet per_Page = 15;\nlet totalPages = 0;\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  hideLoadMoreButton();\n  searchWord = inputSearch.value.trim();\n\n  if (!searchWord) {\n    form.reset();\n    return iziToast.error({\n      message: `The input string must not be empty.`,\n      position: 'topRight',\n    });\n  }\n\n  showLoader();\n  clearGallery();\n\n  page = 1;\n  per_Page = document.querySelector('.page_per_selest').value;\n\n  getImagesByQuery(searchWord, page, per_Page)\n    .then(images => {\n      hideLoader();\n\n      if (images.hits.length === 0) {\n        return iziToast.info({\n          message: `There are no results for your query.`,\n          position: 'topRight',\n        });\n      }\n\n      createGallery(images.hits);\n      totalPages = images.totalHits / per_Page;\n      if (totalPages > 1) {\n        page++;\n        showLoadMoreButton();\n      } else {\n        return iziToast.success({\n          message: `This is all that was found by query.`,\n          position: 'topRight',\n        });\n      }\n    })\n\n    .catch(error => {\n      hideLoader();\n      console.error('Error fetching images:', error);\n    });\n\n  form.reset();\n});\n\nbtnMore.addEventListener('click', async () => {\n  getImagesByQuery(searchWord, page, per_Page)\n    .then(images => {\n      createGallery(images.hits);\n      scrollPage();\n    })\n\n    .catch(error => {\n      console.error('Error click button images:', error);\n    });\n\n  page++;\n\n  if (totalPages <= page) {\n    hideLoadMoreButton();\n\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results\",\n      position: 'topRight',\n    });\n  }\n});\n\nfunction scrollPage() {\n  const rect = document.querySelector('.gallery-link').getBoundingClientRect();\n  window.scrollBy({\n    top: rect.height * 2 + 48,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","getImagesByQuery","query","page","perPage","axios","lightbox","SimpleLightbox","createGallery","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","inputSearch","btnMore","searchWord","per_Page","totalPages","event","iziToast","error","scrollPage","rect"],"mappings":"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"}